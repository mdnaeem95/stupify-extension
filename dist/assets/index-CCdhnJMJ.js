import{c as A,r,j as e,R as C,a as E}from"./globals-DvHHdZrZ.js";import{a as c,L as P,E as j,F as D}from"./rateLimiter-CeXPzy5c.js";import{S as N}from"./sparkles-CQiXILgo.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],U=A("book-open",R),d={SIGNUP:"https://stupify.app/signup",DASHBOARD:"https://stupify.app/chat",UPGRADE:"https://stupify.app/pricing"},I=()=>{var b;const[n,w]=r.useState({isAuthenticated:!1,user:null,loading:!0}),[v,l]=r.useState(!1),[o,m]=r.useState(""),[x,u]=r.useState(""),[i,p]=r.useState(!1),[g,h]=r.useState("");r.useEffect(()=>c.subscribe(a=>{w(a),console.log("ðŸ”„ Auth state updated in Popup:",a)}),[]);const S=async s=>{s.preventDefault(),h(""),p(!0);try{console.log("ðŸ” Attempting login...",o),await c.login(o,x),console.log("âœ… Login successful!"),l(!1),m(""),u("")}catch(a){console.error("âŒ Login failed:",a),h(a.message||"Login failed. Please try again.")}finally{p(!1)}},L=async()=>{try{await c.logout()}catch(s){console.error("Logout error:",s)}},k=()=>{chrome.tabs.create({url:d.DASHBOARD})},y=()=>{chrome.tabs.create({url:d.SIGNUP})};if(n.loading)return e.jsx("div",{className:"w-80 h-96 flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"text-sm text-primary-700",children:"Loading..."})]})});if(!n.isAuthenticated)return v?e.jsx("div",{className:"w-80 bg-gradient-to-br from-primary-50 to-primary-100 p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Login to Stupify"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:o,onChange:s=>m(s.target.value),placeholder:"you@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{type:"password",value:x,onChange:s=>u(s.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,disabled:i})]}),g&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:g})}),e.jsx("button",{type:"submit",disabled:i,className:"w-full px-4 py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 animate-spin"}),"Logging in..."]}):"Login"}),e.jsx("button",{type:"button",onClick:()=>l(!1),className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Back"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-center text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:y,className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]})})]})}):e.jsx("div",{className:"w-80 h-96 flex flex-col items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center mx-auto",children:e.jsx(N,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Stupify"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sign in to start getting instant explanations for anything you read online."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>l(!0),className:"w-full px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:"Login"}),e.jsx("button",{onClick:y,className:"w-full px-4 py-3 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg font-medium transition-colors",children:"Create Account"})]})]})});const t=n.user,f=(t==null?void 0:t.subscription_tier)==="premium";return e.jsxs("div",{className:"w-80 bg-gradient-to-br from-primary-50 to-primary-100",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:((b=t==null?void 0:t.email)==null?void 0:b[0].toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.email)||"User"}),f&&e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-full text-xs font-semibold",children:"âœ¨ Premium"})]})]})})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("button",{onClick:k,className:"w-full flex items-center justify-between p-3 bg-white rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-primary-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Open Dashboard"})]}),e.jsx(j,{className:"w-4 h-4 text-gray-400"})]}),!f&&e.jsxs("button",{onClick:()=>chrome.tabs.create({url:d.UPGRADE}),className:"w-full flex items-center justify-between p-3 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upgrade to Premium"})]}),e.jsx(j,{className:"w-4 h-4"})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:L,className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Logout"})})]}),e.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:e.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Highlight text on any page and right-click ",e.jsx("strong",{children:'"Simplify with Stupify"'})]})})]})};C.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(I,{})}));
