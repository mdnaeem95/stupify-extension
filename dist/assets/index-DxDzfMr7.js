import{c as x,a as A,r as o,j as e,S as c,E as k,R as E,b as T}from"./globals-DrID7SY-.js";import{f as D}from"./utils-BvHapBx2.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],L=x("book-open",_);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],O=x("flame",R);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],q=x("settings",U),n={AUTH_TOKEN:"auth_token",USER_DATA:"user_data"},l={LOGIN:"https://stupify.app/login",SIGNUP:"https://stupify.app/signup",DASHBOARD:"https://stupify.app/chat"};async function u(t){try{return(await chrome.storage.sync.get(t))[t]||null}catch(a){return console.error(`Error getting ${t} from storage:`,a),null}}async function p(t,a){try{return await chrome.storage.sync.set({[t]:a}),!0}catch(s){return console.error(`Error setting ${t} to storage:`,s),!1}}async function g(t,a=!1){try{return a?await chrome.storage.local.remove(t):await chrome.storage.sync.remove(t),!0}catch(s){return console.error(`Error removing ${t} from storage:`,s),!1}}const d={get:()=>u(n.AUTH_TOKEN),set:t=>p(n.AUTH_TOKEN,t),remove:()=>g(n.AUTH_TOKEN)},m={get:()=>u(n.USER_DATA),set:t=>p(n.USER_DATA,t),remove:()=>g(n.USER_DATA)},y=A((t,a)=>({user:null,token:null,isLoading:!0,isAuthenticated:!1,setUser:s=>{t({user:s,isAuthenticated:!!s})},setToken:s=>{t({token:s,isAuthenticated:!!s})},login:async(s,r)=>{await d.set(r),await m.set(s),t({user:s,token:r,isAuthenticated:!0,isLoading:!1})},logout:async()=>{await d.remove(),await m.remove(),t({user:null,token:null,isAuthenticated:!1,isLoading:!1})},checkAuth:async()=>{t({isLoading:!0});try{const s=await d.get(),r=await m.get();return s&&r?(t({token:s,user:r,isAuthenticated:!0,isLoading:!1}),!0):(t({token:null,user:null,isAuthenticated:!1,isLoading:!1}),!1)}catch(s){return console.error("Error checking auth:",s),t({token:null,user:null,isAuthenticated:!1,isLoading:!1}),!1}},refreshToken:async()=>a().isAuthenticated}));typeof window<"u"&&y.getState().checkAuth();const H=()=>{const{user:t,isAuthenticated:a,isLoading:s}=y(),[r,f]=o.useState({streak:0,questionsToday:0,totalQuestions:0}),[h,j]=o.useState([]);o.useEffect(()=>{N()},[t]);const N=async()=>{f({streak:7,questionsToday:12,totalQuestions:142}),j([{question:"What is React?",complexity:"5yo",timestamp:Date.now()-36e5},{question:"Explain DNS",complexity:"normal",timestamp:Date.now()-72e5},{question:"How do rockets work?",complexity:"advanced",timestamp:Date.now()-108e5}])},b=()=>{chrome.tabs.create({url:l.DASHBOARD})},w=()=>{chrome.runtime.openOptionsPage()},v=()=>{chrome.tabs.create({url:l.LOGIN})};return s?e.jsx("div",{className:"w-80 h-96 flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),e.jsx("p",{className:"text-sm text-primary-700",children:"Loading..."})]})}):a?e.jsxs("div",{className:"w-80 bg-gradient-to-br from-primary-50 to-primary-100",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-4 h-4 text-white"})}),e.jsx("h1",{className:"font-bold text-lg text-gray-900",children:"Stupify"})]}),e.jsx("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Settings",children:e.jsx(q,{className:"w-4 h-4 text-gray-600"})})]}),(t==null?void 0:t.subscription_tier)==="premium"&&e.jsxs("div",{className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full inline-flex items-center gap-1",children:[e.jsx(c,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:"Premium"})]})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(O,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Streak"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.streak}),e.jsx("p",{className:"text-xs text-gray-500",children:"days"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(L,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Today"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.questionsToday}),e.jsx("p",{className:"text-xs text-gray-500",children:"questions"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Questions"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:D(r.totalQuestions)})]})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Recent"}),e.jsx("div",{className:"space-y-2",children:h.length===0?e.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No recent explanations yet.",e.jsx("br",{}),"Highlight some text to get started!"]}):h.map((i,S)=>e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200 hover:border-primary-300 transition-colors cursor-pointer",children:[e.jsx("p",{className:"text-sm text-gray-900 truncate",children:i.question}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:i.complexity}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(i.timestamp).toLocaleDateString()})]})]},S))})]}),e.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:e.jsxs("button",{onClick:b,className:"w-full px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Open Dashboard"]})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"bg-primary-100 rounded-lg p-3 border border-primary-200",children:e.jsxs("p",{className:"text-xs text-primary-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Highlight any text on a webpage and press"," ",e.jsx("code",{className:"bg-white px-1 rounded",children:"Cmd+Shift+S"})," to get an instant explanation!"]})})})]}):e.jsx("div",{className:"w-80 h-96 flex flex-col items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center mx-auto",children:e.jsx(c,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Stupify"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sign in to start getting instant explanations for anything you read online."}),e.jsx("button",{onClick:v,className:"w-full mt-6 px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:"Sign In to Stupify"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>chrome.tabs.create({url:l.SIGNUP}),className:"text-primary-600 hover:text-primary-700 underline",children:"Sign up free"})]})]})})};E.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(H,{})}));
