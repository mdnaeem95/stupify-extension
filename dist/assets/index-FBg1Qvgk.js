import{r as e,j as t,a as s,R as r}from"./react-vendor-HEOWGPvr.js";import{a}from"./rateLimiter-L6ZkJs0D.js";import{S as i,L as l,B as n,E as o,F as c}from"./icons-D19DpaoO.js";import"./globals-CZNwFqmC.js";const d="https://stupify.app/signup",m="https://stupify.app/chat",x="https://stupify.app/pricing",p=()=>{var s;const[r,p]=e.useState({isAuthenticated:!1,user:null,loading:!0}),[u,h]=e.useState(!1),[g,y]=e.useState(""),[f,b]=e.useState(""),[j,N]=e.useState(!1),[w,v]=e.useState("");e.useEffect(()=>a.subscribe(e=>{p(e)}),[]);const S=async e=>{e.preventDefault(),v(""),N(!0);try{await a.login(g,f),h(!1),y(""),b("")}catch(t){v(t.message||"Login failed. Please try again.")}finally{N(!1)}},k=()=>{chrome.tabs.create({url:d})};if(r.loading)return t.jsx("div",{className:"w-80 h-96 flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),t.jsx("p",{className:"text-sm text-primary-700",children:"Loading..."})]})});if(!r.isAuthenticated)return u?t.jsx("div",{className:"w-80 bg-gradient-to-br from-primary-50 to-primary-100 p-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center",children:t.jsx(i,{className:"w-5 h-5 text-white"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Login to Stupify"})]}),t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:g,onChange:e=>y(e.target.value),placeholder:"you@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,disabled:j})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),t.jsx("input",{type:"password",value:f,onChange:e=>b(e.target.value),placeholder:"••••••••",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,disabled:j})]}),w&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-700",children:w})}),t.jsx("button",{type:"submit",disabled:j,className:"w-full px-4 py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:j?t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"w-4 h-4 animate-spin"}),"Logging in..."]}):"Login"}),t.jsx("button",{type:"button",onClick:()=>h(!1),className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Back"})]}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-center text-gray-600",children:["Don't have an account?"," ",t.jsx("button",{onClick:k,className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign up"})]})})]})}):t.jsx("div",{className:"w-80 h-96 flex flex-col items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 p-6",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-full flex items-center justify-center mx-auto",children:t.jsx(i,{className:"w-8 h-8 text-white"})}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome to Stupify"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Sign in to start getting instant explanations for anything you read online."}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>h(!0),className:"w-full px-4 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors",children:"Login"}),t.jsx("button",{onClick:k,className:"w-full px-4 py-3 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-lg font-medium transition-colors",children:"Create Account"})]})]})});const C=r.user,L="premium"===(null==C?void 0:C.subscription_tier);return t.jsxs("div",{className:"w-80 bg-gradient-to-br from-primary-50 to-primary-100",children:[t.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-sm",children:(null==(s=null==C?void 0:C.email)?void 0:s[0].toUpperCase())||"U"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:(null==C?void 0:C.email)||"User"}),L&&t.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-full text-xs font-semibold",children:"✨ Premium"})]})]})})}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("button",{onClick:()=>{chrome.tabs.create({url:m})},className:"w-full flex items-center justify-between p-3 bg-white rounded-lg hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(n,{className:"w-5 h-5 text-primary-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Open Dashboard"})]}),t.jsx(o,{className:"w-4 h-4 text-gray-400"})]}),!L&&t.jsxs("button",{onClick:()=>chrome.tabs.create({url:x}),className:"w-full flex items-center justify-between p-3 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-lg hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(c,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm font-medium",children:"Upgrade to Premium"})]}),t.jsx(o,{className:"w-4 h-4"})]}),t.jsx("div",{className:"pt-3 border-t border-gray-200",children:t.jsx("button",{onClick:async()=>{try{await a.logout()}catch(e){}},className:"w-full px-4 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Logout"})})]}),t.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:t.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Highlight text on any page and right-click ",t.jsx("strong",{children:'"Simplify with Stupify"'})]})})]})};s.createRoot(document.getElementById("root")).render(t.jsx(r.StrictMode,{children:t.jsx(p,{})}));
